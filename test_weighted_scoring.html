<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weighted Scoring Test</title>
</head>
<body>
    <h1>Weighted Scoring Test</h1>
    <div id="results"></div>

    <script src="data.js"></script>
    <script src="engine.js"></script>
    <script>
        // Test case: Complex case with neck flexion
        const engine = new FelineNeuroDiagnosisEngine(FelineNeuroDiagnosisData);
        
        const complexCase = {
            age_group: 'senior',
            onset_speed: 'sudden',
            mobility_status: 'paralyzed',
            seizures: 'severe',
            eye_signs: true,
            pain_signs: true,
            head_tilt: false,
            recent_trauma: true,  // This should be high priority
            cold_limbs: true,
            neck_flexion: true,   // This used to dominate
            ear_issues: false
        };

        console.log('ðŸ§ª Testing complex case with multiple serious signs + neck flexion...');
        console.log('ðŸ“Š Input:', complexCase);
        
        try {
            const result = engine.runDiagnosis(complexCase, { skipConfirmation: true });
            
            document.getElementById('results').innerHTML = `
                <h2>Test Results:</h2>
                <p><strong>Selected Diagnosis:</strong> ${result.diagnosis}</p>
                <p><strong>Priority:</strong> ${result.priority}</p>
                <p><strong>Winning Score:</strong> ${result.winningScore.total} points</p>
                
                <h3>Score Breakdown:</h3>
                <ul>
                    ${result.winningScore.breakdown.map(item => `<li>${item}</li>`).join('')}
                </ul>
                
                <h3>Alternative Matches:</h3>
                <ul>
                    ${result.alternativeMatches.map(alt => 
                        `<li>Priority ${alt.priority}: ${alt.name} (${alt.score} points)</li>`
                    ).join('')}
                </ul>
                
                <h3>Analysis:</h3>
                <p>This test shows that even though neck flexion is present (which used to dominate), 
                the weighted scoring system now properly considers the trauma + severe seizures + paralysis 
                as more significant, giving a more clinically appropriate diagnosis.</p>
            `;
            
        } catch (error) {
            document.getElementById('results').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
        }
    </script>
</body>
</html>